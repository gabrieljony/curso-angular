<form class="form-horizontal" [formGroup]="formulario" (ngSubmit)="onSubmit()">
  <div class="form-row">

    <div class="col-md-12">
      <label for="nome" [ngClass]="aplicaCssErroLabel('nome')">Nome</label>
    </div>

    <div class="col-md-12">
      <input type="text" class="form-control" id="nome" placeholder="Nome" formControlName="nome" [ngClass]="aplicaCssErro('nome')"/>
      <div *ngIf="verificaValidTouched('nome')" class="invalid-feedback">
        Nome é obrigatório.
      </div>
    </div>

  </div>

  <div class="form-row">
    <div class="col-md-12">
      <label for="email" [ngClass]="aplicaCssErroLabel('email')">E-mail</label>
    </div>
    <div class="col-md-12">
      <input type="email" class="form-control" id="email" placeholder="nome@email.com" formControlName="email" [ngClass]="aplicaCssErro('email')"/>
      <div *ngIf="verificaValidTouched('email')" class="invalid-feedback">
        E-mail é obrigatório.
      </div>
      <div *ngIf="verificaValidEmailInvalido('email')" class="invalid-feedback">
        E-mail inválido.
      </div>
      <!-- 2 form de fazer a validação -->
      <!-- <app-campo-control-error
      [mostrarErro]="!formulario.get('email').valid && formulario.get('email').touched"
      msgErro="E-mail é obrigatório."
      ></app-campo-control-error> -->
      <!-- 3 forma de fazer a validação -->
      <!-- <app-campo-control-error
      [mostrarErro]="!formulario.controls['email'].valid && formulario.controls['email'].touched"
      msgErro="E-mail é obrigatório."
      ></app-campo-control-error> -->
      <!-- 4 forma de fazer a validação -->
      <!-- <app-campo-control-error
      [mostrarErro]="verificaValidTouched('email')"
      msgErro="E-mail é obrigatório."
      ></app-campo-control-error> -->
    </div>
  </div>

  <!-- ENDEREÇO -->
  <div formGroupName="endereco">
    <div class="form-row">
      <div class="col-md-3">
        <label for="cep" [ngClass]="aplicaCssErroLabel('endereco.cep')">CEP</label>
        <input type="text" class="form-control" id="cep" placeholder="CEP" formControlName="cep" [ngClass]="aplicaCssErro('endereco.cep')" (blur)="consultaCEP()"/>
        <div *ngIf="verificaValidTouched('endereco.cep')" class="invalid-feedback">
          CEP é obrigatório.
        </div>
        <div *ngIf="verificaValidCep('endereco.cep')" class="invalid-feedback">
          CEP é inválido.
        </div>
      </div>
      <div class="col-md-3">
        <label for="numero" [ngClass]="aplicaCssErroLabel('endereco.numero')">Número</label>
        <input type="text" class="form-control" id="numero" placeholder="Número" formControlName="numero"[ngClass]="aplicaCssErro('endereco.numero')"/>
        <div *ngIf="verificaValidTouched('endereco.numero')" class="invalid-feedback">
          Número é obrigatório.
        </div>
      </div>
      <div class="col-md-6">
        <label for="complemento">Complemento</label>
        <input type="text" class="form-control" id="complemento" placeholder="Complemento" formControlName="complemento" readonly/>
      </div>

    </div>
    <div class="form-row">
      <div class="col-md-12">
        <label for="rua" [ngClass]="aplicaCssErroLabel('endereco.rua')">rua</label>
        <input type="text" class="form-control" id="rua" placeholder="rua" formControlName="rua" [ngClass]="aplicaCssErro('endereco.rua')"/>
        <div *ngIf="verificaValidTouched('endereco.rua')" class="invalid-feedback">
          rua é obrigatório.
        </div>
      </div>
    </div>
    <div>
      <div class="form-row">
        <div class="col-md-5">
          <label for="bairro"[ngClass]="aplicaCssErroLabel('endereco.bairro')">bairro</label>
          <input type="text" class="form-control" id="bairro" placeholder="bairro" formControlName="bairro" [ngClass]="aplicaCssErro('endereco.bairro')"/>
          <div *ngIf="verificaValidTouched('endereco.bairro')" class="invalid-feedback">
            bairro é obrigatório.
          </div>
        </div>
        <div class="col-md-4">
          <label for="cidade" [ngClass]="aplicaCssErroLabel('endereco.cidade')">cidade</label>
          <input type="text" class="form-control" id="cidade" placeholder="cidade" formControlName="cidade" [ngClass]="aplicaCssErro('endereco.cidade')"/>
          <div *ngIf="verificaValidTouched('endereco.cidade')" class="invalid-feedback">
            cidade é obrigatório.
          </div>
        </div>
        <div class="col-md-3">
          <label for="estado" [ngClass]="aplicaCssErroLabel('endereco.estado')">estado</label>
          <select class="form-control" id="estado" formControlName="estado" [ngClass]="aplicaCssErro('endereco.estado')">
            <option *ngFor="let estado of estados | async" [value]="estado.sigla">{{ estado.nome }}</option>
          </select>
          <div *ngIf="verificaValidTouched('endereco.estado')" class="invalid-feedback">
            estado é obrigatório.
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- FIM DO ENDEREÇO -->

  <button type="submit" class="btn btn-primary">Enviar</button>
  <button class="btn" (click)="limpar()">Limpar</button>

  <app-form-debug [form]="formulario"></app-form-debug>
</form>
