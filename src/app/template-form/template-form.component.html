<form #f="ngForm" (ngSubmit)="onSubmit(f)" class="form-horizontal">
  <div class="form-row">

    <div class="col-md-12">
      <label for="nome" [class.control-label]="!nome.valid && nome.touched">Nome</label>
    </div>

    <div class="col-md-12">
      <input type="text" class="form-control" id="nome" placeholder="Nome" name="nome" [(ngModel)]="usuario.nome"
        required #nome="ngModel" [ngClass]="aplicaCssErro(nome)" />
      <div>{{ nome.className }}</div>
      <div *ngIf="!nome.valid && nome.touched" class="invalid-feedback">
        Nome é obrigatótio.
      </div>
    </div>

  </div>

  <div class="form-row">
    <div class="col-md-12">
      <label for="email" [class.control-label]="!email.valid && email.touched">E-mail</label>
    </div>
    <div class="col-md-12">
      <input type="email" class="form-control" id="email" placeholder="nome@email.com" name="email" ngModel
        [(ngModel)]="usuario.email" required email #email="ngModel" [ngClass]="aplicaCssErro(email)" />
      <div>{{ email.className }}</div>
      <div *ngIf="!email.valid && email.touched" class="invalid-feedback">
        E-mail é obrigatório.
      </div>
    </div>
  </div>

  <div class="form-row">
    <div class="col-md-3">
      <label for="cep" [class.control-label]="!cep.valid && cep.touched">CEP</label>
      <input type="text" class="form-control" id="cep" placeholder="CEP" name="cep" ngModel [(ngModel)]="usuario.cep"
        required cep #cep="ngModel" [ngClass]="aplicaCssErro(cep)" />
      <div *ngIf="!cep.valid && cep.touched" class="invalid-feedback">
        CEP é obrigatório.
      </div>
    </div>
    <div class="col-md-3">
      <label for="numero" [class.control-label]="!numero.valid && numero.touched">Número</label>
      <input type="text" class="form-control" id="numero" placeholder="Número" name="numero" ngModel
        [(ngModel)]="usuario.numero" required numero #numero="ngModel" [ngClass]="aplicaCssErro(numero)" />
      <div *ngIf="!numero.valid && numero.touched" class="invalid-feedback">
        Número é obrigatório.
      </div>
    </div>
    <div class="col-md-6">
      <label for="complemento">Complemento</label>
      <input type="text" class="form-control" id="complemento" placeholder="Complemento" name="complemento" ngModel
        [(ngModel)]="usuario.complemento" required complemento #complemento="ngModel" />
    </div>

  </div>
  <div class="form-row">
    <div class="col-md-12">
      <label for="rua" [class.control-label]="!rua.valid && rua.touched">rua</label>
      <input type="text" class="form-control" id="rua" placeholder="rua" name="rua" ngModel
        [(ngModel)]="usuario.rua" required rua #rua="ngModel" [ngClass]="aplicaCssErro(rua)"/>
      <!-- readonly = uma diretiva do angular e do html 5 onde o campo não pode ser editado -->
      <div *ngIf="!rua.valid && rua.touched" class="invalid-feedback">
        rua é obrigatório.
      </div>
    </div>
  </div>
  <div class="form-row">
    <div class="col-md-5">
      <label for="bairro" [class.control-label]="!bairro.valid && bairro.touched">bairro</label>
      <input type="text" class="form-control" id="bairro" placeholder="bairro" name="bairro" ngModel
        [(ngModel)]="usuario.bairro" required bairro #bairro="ngModel" [ngClass]="aplicaCssErro(bairro)" />
      <div *ngIf="!bairro.valid && bairro.touched" class="invalid-feedback">
        bairro é obrigatório.
      </div>
    </div>
    <div class="col-md-4">
      <label for="cidade" [class.control-label]="!cidade.valid && cidade.touched">cidade</label>
      <input type="text" class="form-control" id="cidade" placeholder="cidade" name="cidade" ngModel
        [(ngModel)]="usuario.cidade" required cidade #cidade="ngModel" [ngClass]="aplicaCssErro(cidade)" />
      <div *ngIf="!cidade.valid && cidade.touched" class="invalid-feedback">
        cidade é obrigatório.
      </div>
    </div>
    <div class="col-md-3">
      <label for="estado" [class.control-label]="verificaValidTouched(estado)">estado</label>
      <input type="text" class="form-control" id="estado" placeholder="estado" name="estado" ngModel
        [(ngModel)]="usuario.estado" required estado #estado="ngModel" [ngClass]="aplicaCssErro(estado)" />
      <div *ngIf="verificaValidTouched(estado)" class="invalid-feedback">
        estado é obrigatório.
      </div>
    </div>
  </div>

  <button type="submit" class="btn btn-primary" [disabled]="!f.valid">Enviar</button>

  <app-form-debug [form]="f"></app-form-debug>
</form>